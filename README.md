التصميم يعتمد بالكامل على فصل "الحالة" (State) عن "المنطق" (Logic) عن "الواجهة" (UI).

     الحالة (State): ممثلة بكائن GameState غير قابل للتغيير (Immutable). هذا يعني أنه عند كل حركة، يتم إنشاء حالة جديدة بالكامل بدلاً من تعديل الحالة القديمة.
     المنطق (Logic): مكتوب على شكل دوال نقية (Pure Functions) في game_logic.py. هذه الدوال لا تغير أي بيانات خارجية، بل تأخذ حالة كمدخل وتُرجع حالة جديدة ك مخرجات.

هيكل المشروع والملفات:

المشروع مقسم إلى 4 ملفات رئيسية، لكل منها مسؤولية واحدة واضحة:

    game_state.py:
         يحتوي على تعريف GameState باستخدام @dataclass(frozen=True).
         مميز: هذا يجعل الكائن hashable و immutable، وهو المفتاح لسرعة الخوارزميات وتتبع الحالات التي تمت زيارتها.


    game_logic.py:
         "عقل" اللعبة. يحتوي على كل القواعد كدوال نقية.
         الدوال الأساسية (كما طلبت):
             get_available_transitions(state): ترجع قائمة بالحركات الممكنة.
             apply_transition(state, action): تطبق حركة كاملة (تحريك لاعب، انتشار نار/ماء، تحديث أرقام) وترجع حالة جديدة.
             is_terminal(state): تحدد إذا كانت الحالة نهائية (فوز/خسارة).

         منطق اللعبة معالج بالكامل: دفع الثلج(الجدار الذي يمكننا تحريكه)، تحول الماء إلى بلوك، وموت اللاعب سواء بالمباشر أو بانتشار الحمم في الدورة التالية.


    pygame_renderer.py:
         مسؤول فقط عن "الرسم". يأخذ حالة ويرسمها على الشاشة.

    game_app.py:
         التطبيق الرئيسي. يدير حلقة اللعبة، يأخذ مدخلات من المستخدم (WASD)، ويستخدم دوال game_logic و pygame_renderer لتشغيل اللعبة.

     game_solver.py:
          يوجد خوارزمية DFS , BFS